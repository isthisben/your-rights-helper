@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lexie+Readable:wght@400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Work Rights Navigator Design System
   Warm, inviting, comforting pastels
   All colors in HSL */

@layer base {
  :root {
    /* Text size scale - controlled by accessibility */
    --text-scale: 1;
    
    /* Core palette - Warm, inviting cream with golden undertones */
    --background: 35 38% 88%;
    --foreground: 20 40% 18%;

    --card: 32 32% 92%;
    --card-foreground: 20 40% 18%;

    --popover: 35 45% 99%;
    --popover-foreground: 20 40% 18%;

    /* Primary - Warm terracotta */
    --primary: 25 45% 50%;
    --primary-foreground: 35 50% 98%;
    --primary-light: 25 40% 92%;

    /* Secondary - Soft warm sand */
    --secondary: 35 28% 85%;
    --secondary-foreground: 20 35% 25%;

    /* Muted - Warm beige */
    --muted: 32 22% 87%;
    --muted-foreground: 20 20% 40%;

    /* Accent - Soft peach */
    --accent: 20 50% 92%;
    --accent-foreground: 20 45% 25%;

    /* Destructive - Muted warm red */
    --destructive: 5 50% 48%;
    --destructive-foreground: 0 0% 100%;

    /* Status colors - warm tones */
    --status-ok: 145 35% 40%;
    --status-ok-bg: 145 30% 94%;
    --status-ok-border: 145 25% 70%;
    
    --status-warning: 35 70% 48%;
    --status-warning-bg: 35 60% 94%;
    --status-warning-border: 35 50% 68%;
    
    --status-urgent: 5 55% 50%;
    --status-urgent-bg: 5 45% 96%;
    --status-urgent-border: 5 40% 70%;

    /* Borders & inputs - warm tones */
    --border: 32 22% 82%;
    --input: 32 22% 82%;
    --ring: 25 45% 50%;

    --radius: 1rem;
    
    /* Header color - Warm camel/tan */
    --header: 30 30% 62%;
    --header-foreground: 20 40% 18%;

    /* Sidebar */
    --sidebar-background: 32 32% 92%;
    --sidebar-foreground: 20 40% 18%;
    --sidebar-primary: 25 45% 50%;
    --sidebar-primary-foreground: 35 50% 98%;
    --sidebar-accent: 20 50% 92%;
    --sidebar-accent-foreground: 20 45% 25%;
    --sidebar-border: 30 25% 85%;
    --sidebar-ring: 25 45% 50%;

    /* Accessibility overrides */
    --font-family: 'Inter', system-ui, -apple-system, sans-serif;
    --font-family-dyslexia: 'Lexie Readable', 'OpenDyslexic', 'Comic Sans MS', cursive;
    
    /* Animation tokens */
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    --transition-smooth: 0.4s var(--ease-out-expo);
    --transition-fast: 0.2s var(--ease-out-expo);
  }

  /* High contrast mode */
  .high-contrast {
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 0%;
    --primary: 15 80% 40%;
    --primary-foreground: 0 0% 100%;
    --border: 0 0% 0%;
    --muted-foreground: 0 0% 20%;
    --status-ok: 145 80% 25%;
    --status-warning: 40 90% 35%;
    --status-urgent: 0 80% 40%;
  }

  /* Colorblind-friendly mode - Base colors (will be overridden by specific types) */
  .colorblind-mode {
    /* Default: blue/orange/purple scheme - only used if no specific type is set */
    --background: 220 25% 90% !important;
    --foreground: 220 40% 15% !important;
    --card: 220 20% 94% !important;
    --card-foreground: 220 40% 15% !important;
    --primary: 210 70% 45% !important;
    --primary-foreground: 0 0% 100% !important;
    --secondary: 35 30% 88% !important;
    --secondary-foreground: 220 40% 20% !important;
    --muted: 220 15% 90% !important;
    --muted-foreground: 220 30% 40% !important;
    --accent: 35 40% 94% !important;
    --accent-foreground: 220 40% 20% !important;
    --border: 220 20% 85% !important;
    --input: 220 20% 85% !important;
    --ring: 210 70% 45% !important;
    --status-ok: 210 80% 40% !important;
    --status-ok-bg: 210 60% 94% !important;
    --status-ok-border: 210 60% 50% !important;
    --status-warning: 35 90% 45% !important;
    --status-warning-bg: 35 80% 94% !important;
    --status-warning-border: 35 70% 55% !important;
    --status-urgent: 280 70% 50% !important;
    --status-urgent-bg: 280 50% 95% !important;
    --status-urgent-border: 280 50% 60% !important;
    --header: 210 35% 65% !important;
    --header-foreground: 220 40% 15% !important;
    --sidebar-background: 220 20% 94% !important;
    --sidebar-foreground: 220 40% 15% !important;
    --destructive: 0 70% 50% !important;
    --destructive-foreground: 0 0% 100% !important;
  }
  
  /* Protanopia (red-blind) - use blue/cyan/yellow - MUST override base */
  .colorblind-mode.colorblind-protanopia {
    --background: 200 25% 92% !important;
    --foreground: 200 50% 12% !important;
    --card: 200 20% 96% !important;
    --card-foreground: 200 50% 12% !important;
    --primary: 200 75% 50% !important;
    --primary-foreground: 0 0% 100% !important;
    --secondary: 55 35% 90% !important;
    --secondary-foreground: 200 50% 15% !important;
    --muted: 200 15% 92% !important;
    --muted-foreground: 200 35% 35% !important;
    --accent: 55 40% 95% !important;
    --accent-foreground: 200 50% 15% !important;
    --border: 200 20% 87% !important;
    --input: 200 20% 87% !important;
    --ring: 200 75% 50% !important;
    --status-ok: 200 85% 45% !important;
    --status-ok-bg: 200 65% 94% !important;
    --status-ok-border: 200 65% 55% !important;
    --status-warning: 55 90% 50% !important;
    --status-warning-bg: 55 80% 94% !important;
    --status-warning-border: 55 70% 60% !important;
    --status-urgent: 15 85% 55% !important;
    --status-urgent-bg: 15 70% 96% !important;
    --status-urgent-border: 15 65% 65% !important;
    --header: 200 40% 68% !important;
    --header-foreground: 200 50% 12% !important;
    --sidebar-background: 200 20% 96% !important;
    --sidebar-foreground: 200 50% 12% !important;
    --destructive: 15 75% 55% !important;
    --destructive-foreground: 0 0% 100% !important;
  }
  
  /* Deuteranopia (green-blind) - use blue/purple/orange - MUST override base */
  .colorblind-mode.colorblind-deuteranopia {
    --background: 220 25% 91% !important;
    --foreground: 220 45% 13% !important;
    --card: 220 20% 95% !important;
    --card-foreground: 220 45% 13% !important;
    --primary: 220 70% 48% !important;
    --primary-foreground: 0 0% 100% !important;
    --secondary: 280 30% 89% !important;
    --secondary-foreground: 220 45% 18% !important;
    --muted: 220 15% 91% !important;
    --muted-foreground: 220 32% 38% !important;
    --accent: 280 35% 94% !important;
    --accent-foreground: 220 45% 18% !important;
    --border: 220 20% 86% !important;
    --input: 220 20% 86% !important;
    --ring: 220 70% 48% !important;
    --status-ok: 220 80% 45% !important;
    --status-ok-bg: 220 60% 94% !important;
    --status-ok-border: 220 60% 55% !important;
    --status-warning: 280 75% 50% !important;
    --status-warning-bg: 280 60% 94% !important;
    --status-warning-border: 280 55% 60% !important;
    --status-urgent: 25 85% 55% !important;
    --status-urgent-bg: 25 70% 96% !important;
    --status-urgent-border: 25 65% 65% !important;
    --header: 220 38% 66% !important;
    --header-foreground: 220 45% 13% !important;
    --sidebar-background: 220 20% 95% !important;
    --sidebar-foreground: 220 45% 13% !important;
    --destructive: 25 75% 55% !important;
    --destructive-foreground: 0 0% 100% !important;
  }
  
  /* Tritanopia (blue-blind) - use red/orange/green - MUST override base */
  .colorblind-mode.colorblind-tritanopia {
    --background: 30 30% 89% !important;
    --foreground: 30 50% 14% !important;
    --card: 30 25% 93% !important;
    --card-foreground: 30 50% 14% !important;
    --primary: 145 65% 42% !important;
    --primary-foreground: 0 0% 100% !important;
    --secondary: 30 35% 88% !important;
    --secondary-foreground: 30 50% 18% !important;
    --muted: 30 20% 90% !important;
    --muted-foreground: 30 40% 36% !important;
    --accent: 0 40% 94% !important;
    --accent-foreground: 30 50% 18% !important;
    --border: 30 25% 84% !important;
    --input: 30 25% 84% !important;
    --ring: 145 65% 42% !important;
    --status-ok: 145 70% 40% !important;
    --status-ok-bg: 145 55% 94% !important;
    --status-ok-border: 145 50% 50% !important;
    --status-warning: 30 85% 50% !important;
    --status-warning-bg: 30 70% 94% !important;
    --status-warning-border: 30 65% 60% !important;
    --status-urgent: 0 75% 50% !important;
    --status-urgent-bg: 0 60% 96% !important;
    --status-urgent-border: 0 55% 60% !important;
    --header: 145 40% 64% !important;
    --header-foreground: 30 50% 14% !important;
    --sidebar-background: 30 25% 93% !important;
    --sidebar-foreground: 30 50% 14% !important;
    --destructive: 0 70% 50% !important;
    --destructive-foreground: 0 0% 100% !important;
  }

  .dark {
    --background: 20 15% 8%;
    --foreground: 35 25% 92%;
    --card: 20 15% 12%;
    --card-foreground: 35 25% 92%;
    --popover: 20 15% 12%;
    --popover-foreground: 35 25% 92%;
    --primary: 15 65% 55%;
    --primary-foreground: 20 15% 8%;
    --secondary: 20 12% 18%;
    --secondary-foreground: 35 20% 85%;
    --muted: 20 12% 16%;
    --muted-foreground: 20 10% 55%;
    --accent: 45 40% 20%;
    --accent-foreground: 45 50% 80%;
    --destructive: 0 55% 45%;
    --destructive-foreground: 0 0% 100%;
    --border: 20 12% 22%;
    --input: 20 12% 22%;
    --ring: 15 65% 55%;
    --sidebar-background: 20 15% 8%;
    --sidebar-foreground: 35 25% 92%;
    --sidebar-primary: 15 65% 55%;
    --sidebar-primary-foreground: 20 15% 8%;
    --sidebar-accent: 45 40% 20%;
    --sidebar-accent-foreground: 45 50% 80%;
    --sidebar-border: 20 12% 22%;
    --sidebar-ring: 15 65% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    font-size: calc(18px * var(--text-scale));
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
    /* Hide scrollbar for Chrome, Safari and Opera */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }

  html::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-family);
    line-height: 1.7;
    letter-spacing: -0.01em;
    overflow-x: hidden;
  }

  /* Dyslexia-friendly font toggle */
  .dyslexia-font body,
  .dyslexia-font {
    font-family: var(--font-family-dyslexia) !important;
    letter-spacing: 0.05em;
    word-spacing: 0.1em;
  }

  /* Reduce motion */
  .reduce-motion *,
  .reduce-motion *::before,
  .reduce-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  /* Focus visible styles for keyboard nav */
  :focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  /* Large tap targets for mobile */
  button, 
  [role="button"],
  input[type="checkbox"],
  input[type="radio"],
  a {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Text size utilities */
.text-size-small {
  --text-scale: 0.9;
}

.text-size-medium {
  --text-scale: 1;
}

.text-size-large {
  --text-scale: 1.2;
}

/* Status indicator patterns for colorblind accessibility */
.colorblind-mode .status-pattern-ok,
.colorblind-mode .colorblind-pattern-ok {
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 3px,
    hsl(var(--status-ok-border) / 0.4) 3px,
    hsl(var(--status-ok-border) / 0.4) 6px
  );
}

.colorblind-mode .status-pattern-warning,
.colorblind-mode .colorblind-pattern-warning {
  background-image: repeating-linear-gradient(
    -45deg,
    transparent,
    transparent 4px,
    hsl(var(--status-warning-border) / 0.5) 4px,
    hsl(var(--status-warning-border) / 0.5) 8px
  );
}

.colorblind-mode .status-pattern-urgent,
.colorblind-mode .colorblind-pattern-urgent {
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 4px,
    hsl(var(--status-urgent-border) / 0.5) 4px,
    hsl(var(--status-urgent-border) / 0.5) 8px
  );
}

/* Add distinct shapes/icons in colorblind mode */
.colorblind-mode .status-indicator-ok::before {
  content: 'âœ“';
  margin-right: 0.25rem;
}

.colorblind-mode .status-indicator-warning::before {
  content: '!';
  margin-right: 0.25rem;
  font-weight: bold;
}

.colorblind-mode .status-indicator-urgent::before {
  content: '!!';
  margin-right: 0.25rem;
  font-weight: bold;
}

/* Skip link for accessibility */
.skip-link {
  @apply absolute left-0 top-0 -translate-y-full bg-primary text-primary-foreground px-4 py-2 z-50;
  transition: transform 0.2s;
}

.skip-link:focus {
  @apply translate-y-0;
}

/* Page transition utilities */
@layer utilities {
  .page-enter {
    opacity: 0;
    transform: translateY(16px);
  }
  
  .page-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.4s var(--ease-out-expo), transform 0.4s var(--ease-out-expo);
  }
  
  .page-exit {
    opacity: 1;
    transform: translateY(0);
  }
  
  .page-exit-active {
    opacity: 0;
    transform: translateY(-16px);
    transition: opacity 0.3s var(--ease-out-expo), transform 0.3s var(--ease-out-expo);
  }

  .animate-fade-up {
    animation: fadeUp 0.6s var(--ease-out-expo) both;
  }
  
  .animate-fade-up-delay-1 {
    animation: fadeUp 0.6s var(--ease-out-expo) 0.1s both;
  }
  
  .animate-fade-up-delay-2 {
    animation: fadeUp 0.6s var(--ease-out-expo) 0.2s both;
  }
  
  .animate-fade-up-delay-3 {
    animation: fadeUp 0.6s var(--ease-out-expo) 0.3s both;
  }
  
  .hover-lift {
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }
  
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px -12px hsl(var(--foreground) / 0.15);
  }
  
  .hover-scale {
    transition: transform var(--transition-fast);
  }
  
  .hover-scale:hover {
    transform: scale(1.02);
  }
  
  .card-shadow {
    box-shadow: 0 4px 24px -8px hsl(var(--foreground) / 0.08);
  }
  
  .card-shadow-lg {
    box-shadow: 0 8px 40px -12px hsl(var(--foreground) / 0.12);
  }
}

@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOut {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(-20px);
  }
}

/* Smooth scroll-linked animations */
@supports (animation-timeline: scroll()) {
  .scroll-fade-in {
    animation: fadeUp linear both;
    animation-timeline: view();
    animation-range: entry 0% entry 40%;
  }
}

/* Welcome page full-screen sections with snap scrolling */
.welcome-section {
  scroll-snap-align: start;
  scroll-snap-stop: always;
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.welcome-section:not(.visible) {
  opacity: 0;
  transform: translateY(30px);
}

.welcome-section.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Ensure smooth scrolling for welcome page */
#main-content {
  scroll-snap-type: y mandatory;
}